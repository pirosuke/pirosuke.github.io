(function(t){function e(e){for(var a,i,o=e[0],c=e[1],d=e[2],h=0,l=[];h<o.length;h++)i=o[h],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&l.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(l.length)l.shift()();return s.push.apply(s,d||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==r[c]&&(a=!1)}a&&(s.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},r={app:0},s=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/games/snake/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var d=0;d<o.length;d++)e(o[d]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"19a2":function(t,e,n){},4578:function(t,e,n){"use strict";n("19a2")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-app-bar",{attrs:{app:"",color:"indigo",dark:""}},[n("v-toolbar-title",{staticClass:"headline"},[n("span",[t._v("Snake Game")])]),n("v-spacer"),n("v-btn",{attrs:{link:"",href:"https://github.com/pirosuke/snake-game",target:"_blank"}},[t._v(" GitHub ")])],1),n("v-main",[n("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[n("router-view")],1)],1)],1)},s=[],i=n("5530"),o=n("2f62"),c={name:"App",components:{},data:function(){return{}},computed:Object(i["a"])({},Object(o["b"])({})),mounted:function(){},created:function(){},destroyed:function(){},methods:{}},d=c,u=n("2877"),h=n("6544"),l=n.n(h),f=n("7496"),p=n("40dc"),m=n("8336"),y=n("a523"),x=n("f6c4"),_=n("2fa4"),k=n("2a7f"),v=Object(u["a"])(d,r,s,!1,null,null,null),b=v.exports;l()(v,{VApp:f["a"],VAppBar:p["a"],VBtn:m["a"],VContainer:y["a"],VMain:x["a"],VSpacer:_["a"],VToolbarTitle:k["a"]});var g=n("8c4f"),w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("SnakeGame")},O=[],S=(n("96cf"),n("1da1")),$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticStyle:{height:"100%"}},[n("StartDialog",{attrs:{open:t.isDialogOpened,message:t.message},on:{"update:open":function(e){t.isDialogOpened=e}}}),n("svg",{ref:"snakeGame",staticStyle:{width:"100%",height:"80%"},attrs:{id:"snake-game"}},[n("Snake",{ref:"snake",attrs:{start_direction:t.snake_direction,start_size:"3"}}),n("Foods",{ref:"foods",attrs:{"max-x":t.maxX,"max-y":t.maxY}}),n("CtrlBtn",{attrs:{x:"10",y:t.maxY-50,label:"L"},nativeOn:{click:function(e){return t.turnSnakeLeft(e)}}}),n("CtrlBtn",{attrs:{x:t.maxX-110,y:t.maxY-50,label:"R"},nativeOn:{click:function(e){return t.turnSnakeRight(e)}}}),n("Score",{ref:"score",attrs:{x:"10",y:"10"}})],1)],1)},F=[],j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{row:"","justify-center":""}},[n("v-dialog",{attrs:{persistent:"","max-width":"300px"},model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v(t._s(t.message))])]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1"},on:{click:t.handleStart}},[t._v("Start")]),n("v-spacer")],1)],1)],1)],1)},P=[],G={props:["open","message"],data:function(){return{}},created:function(){},mounted:function(){},computed:{},methods:{handleStart:function(){this.$emit("update:open",!1)}}},C=G,V=n("b0af"),L=n("99d9"),R=n("169a"),T=n("a722"),E=Object(u["a"])(C,j,P,!1,null,null,null),I=E.exports;l()(E,{VBtn:m["a"],VCard:V["a"],VCardActions:L["a"],VCardTitle:L["b"],VDialog:R["a"],VLayout:T["a"],VSpacer:_["a"]});var B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{attrs:{transform:"translate(1, 1)"}},[n("circle",{attrs:{r:t.parts_radius,fill:"#C00",stroke:"#C00",cx:t.head_point.x,cy:t.head_point.y}}),t._l(t.body_points,(function(e){return n("circle",{key:e.id,attrs:{r:t.parts_radius,fill:"#000",stroke:"#000",cx:e.x,cy:e.y}})}))],2)},D=[],A=(n("d3b7"),n("ddb0"),n("3835")),M=n("b85c"),Y={components:{},props:["start_direction","start_size"],data:function(){return{parts_radius:5,head_point:{x:0,y:0},body_points:[],pxPerInterval:10,direction:"left"}},created:function(){},mounted:function(){this.direction=this.start_direction,this.reset()},computed:{head_tl:function(){return{x:this.head_point.x-this.parts_radius,y:this.head_point.y-this.parts_radius}},head_br:function(){return{x:this.head_point.x+this.parts_radius,y:this.head_point.y+this.parts_radius}}},methods:{reset:function(){this.head_point={x:200,y:200},this.body_points=[];for(var t=0;t<this.start_size;t++)this.addBody()},updatePosition:function(){var t=Object.assign({},this.head_point);switch(this.direction){case"left":this.head_point.x-=this.pxPerInterval;break;case"right":this.head_point.x+=this.pxPerInterval;break;case"up":this.head_point.y-=this.pxPerInterval;break;case"down":this.head_point.y+=this.pxPerInterval;break}var e,n=Object(M["a"])(this.body_points.entries());try{for(n.s();!(e=n.n()).done;){var a=Object(A["a"])(e.value,2),r=a[0],s=a[1],i=s;i.x===t.x&&i.y===t.y||(this.body_points[r]=t),t=i}}catch(o){n.e(o)}finally{n.f()}},turnLeft:function(){switch(this.direction){case"left":this.direction="down";break;case"down":this.direction="right";break;case"right":this.direction="up";break;case"up":this.direction="left";break}},turnRight:function(){switch(this.direction){case"left":this.direction="up";break;case"up":this.direction="right";break;case"right":this.direction="down";break;case"down":this.direction="left";break}},addBody:function(){var t={x:0,y:0};if(0===this.body_points.length)switch(this.direction){case"left":t={x:this.head_point.x+this.pxPerInterval,y:this.head_point.y};break;case"right":t={x:this.head_point.x-this.pxPerInterval,y:this.head_point.y};break;case"up":t={x:this.head_point.x,y:this.head_point.y+this.pxPerInterval};break;case"down":t={x:this.head_point.x,y:this.head_point.y-this.pxPerInterval};break}else t=this.body_points[this.body_points.length-1];this.body_points.push({id:this.body_points.length+1,x:t.x,y:t.y})},isPointHittingSnake:function(t,e){var n,a=!1,r=Object(M["a"])(this.body_points);try{for(r.s();!(n=r.n()).done;){var s=n.value,i=s.x-this.parts_radius,o=s.x+this.parts_radius,c=s.y-this.parts_radius,d=s.y+this.parts_radius;if(t.x<o&&t.x>i&&t.y<d&&t.y>c||e.x>i&&e.x<o&&e.y>c&&e.y<d||t.x===i&&t.y===c&&e.x===o&&e.y===d){a=!0;break}}}catch(u){r.e(u)}finally{r.f()}return a}}},X=Y,z=Object(u["a"])(X,B,D,!1,null,null,null),H=z.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{attrs:{transform:"translate(1, 1)"}},t._l(t.foods,(function(t){return n("Food",{key:t.id,attrs:{x:t.x,y:t.y,color:t.color,radius:t.radius}})})),1)},J=[],K=(n("4de4"),n("b0c0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{attrs:{transform:"translate("+t.x+","+t.y+")"}},[n("circle",{attrs:{r:t.radius,fill:t.color,stroke:t.color,cx:t.radius,cy:t.radius}})])}),N=[],Q={components:{},props:["x","y","radius","color"],data:function(){return{}},created:function(){},mounted:function(){},computed:{},methods:{}},U=Q,W=Object(u["a"])(U,K,N,!1,null,null,null),Z=W.exports,tt={components:{Food:Z},props:["maxX","maxY"],data:function(){return{food_id_seq:1,foods:[],foodTypes:[{name:"normal",color:"#666"},{name:"speedup",color:"#F00"},{name:"grow",color:"#0F0"},{name:"more_food",color:"#00F"}]}},created:function(){},mounted:function(){},computed:{},methods:{reset:function(){this.foods=[]},checkEating:function(t,e){var n,a=null,r=Object(M["a"])(this.foods);try{for(r.s();!(n=r.n()).done;){var s=n.value;if(this.isPointHittingFood(s,t,e)){a=s;break}}}catch(i){r.e(i)}finally{r.f()}return null!==a&&(this.foods=this.foods.filter((function(t){return t.id!==a.id}))),a},isPointHittingFood:function(t,e,n){var a=!1,r=t.x,s=t.x+2*t.radius,i=t.y,o=t.y+2*t.radius;return(e.x<=s&&e.x>=r&&e.y<=o&&e.y>=i||n.x>=r&&n.x<=s&&n.y>=i&&n.y<=o||e.x===r&&e.y===i&&n.x===s&&n.y===o)&&(a=!0),a},addFood:function(){var t=this.getRandomFoodType(),e={id:this.food_id_seq,x:this.generateRandomPoint(this.maxX,20,20),y:this.generateRandomPoint(this.maxY,50,50),radius:5,color:t.color,type:t.name};this.foods.push(e),this.food_id_seq+=1},addFoods:function(t){for(var e=0;e<t;e++)this.addFood()},generateRandomPoint:function(t,e,n){return Math.floor(Math.random()*Math.floor(t-2*n))+e},getRandomFoodType:function(){var t=function(t){return t.sort((function(){return Math.random()-.5}))},e=t(this.foodTypes);return e[0]}}},et=tt,nt=Object(u["a"])(et,q,J,!1,null,null,null),at=nt.exports,rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{attrs:{transform:"translate("+t.x+","+t.y+")"}},[n("a",{attrs:{"xlink:href":"#"}},[n("rect",{attrs:{x:"0",y:"0",width:"100",height:"40",rx:"5",ry:"5"}}),n("text",{attrs:{x:"40",y:"30",fill:"#FFF",stroke:"#FFF","font-size":"25"}},[t._v(" "+t._s(t.label)+" ")])])])},st=[],it={components:{},props:["label","x","y"],data:function(){return{}},created:function(){},mounted:function(){},computed:{},methods:{}},ot=it,ct=Object(u["a"])(ot,rt,st,!1,null,null,null),dt=ct.exports,ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{attrs:{transform:"translate("+t.x+","+t.y+")"}},[n("a",{attrs:{"xlink:href":"#"}},[n("rect",{attrs:{x:"0",y:"0",width:"180",height:"40",stroke:"#000",fill:"#fff",rx:"5",ry:"5"}}),n("text",{attrs:{x:"10",y:"30",width:"180",fill:"#000",stroke:"#000","font-size":"25"}},[t._v(" "+t._s(t.scoreFormatted)+" ")])])])},ht=[],lt=(n("25f0"),n("4d90"),{components:{},props:["x","y"],data:function(){return{score:0}},created:function(){},mounted:function(){},computed:{scoreFormatted:function(){return this.score.toString().padStart(10,"0")}},methods:{addScore:function(t){this.score+=t},resetScore:function(){this.score=0}}}),ft=lt,pt=Object(u["a"])(ft,ut,ht,!1,null,null,null),mt=pt.exports,yt={components:{StartDialog:I,Snake:H,Foods:at,CtrlBtn:dt,Score:mt},props:[],data:function(){return{snake_direction:"left",isGameOver:!1,isDialogOpened:!0,maxX:0,maxY:0,snakeFps:10,snakeLastTs:null}},created:function(){},mounted:function(){this.resetArea(),window.addEventListener("keyup",this.handleKeyup)},watch:{isDialogOpened:function(t){t||(this.$refs.snakeGame.focus(),this.resetGame())}},computed:{message:function(){return this.isGameOver?"Game Over!":""},snakeFpsInterval:function(){return 1e3/this.snakeFps}},methods:{resetArea:function(){var t=this.$refs.snakeGame.getBoundingClientRect();this.maxX=t.width,this.maxY=t.height},resetGame:function(){this.$refs.snake.reset(),this.$refs.foods.reset(),this.$refs.score.resetScore(),this.snake_direction="left",this.isGameOver=!1,this.snakeFps=10;for(var t=0;t<3;t++)this.$refs.foods.addFood();this.lastTs=Date.now(),this.gameLoop()},gameLoop:function(){var t=Date.now(),e=t-this.snakeLastTs;if(e>this.snakeFpsInterval){this.snakeLastTs=t-e%this.snakeFpsInterval,this.$refs.snake.updatePosition(),this.$refs.score.addScore(this.$refs.snake.body_points.length),this.isSnakeAlive()||(this.isGameOver=!0,this.isDialogOpened=!0);var n=this.$refs.foods.checkEating(this.$refs.snake.head_br,this.$refs.snake.head_tl);if(null!==n){switch(n.type){case"speedup":this.snakeFps+=10;break;case"grow":for(var a=0;a<10;a++)this.$refs.snake.addBody();break;case"more_food":this.$refs.foods.addFoods(10);break}this.$refs.snake.addBody(),this.$refs.foods.addFood()}}this.isGameOver||(this.raf=requestAnimationFrame(this.gameLoop))},handleKeyup:function(t){switch(t.keyCode){case 76:this.turnSnakeLeft();break;case 82:this.turnSnakeRight();break}},turnSnakeLeft:function(){this.$refs.snake.turnLeft()},turnSnakeRight:function(){this.$refs.snake.turnRight()},isSnakeAlive:function(){return!(this.$refs.snake.head_tl.x<0||this.$refs.snake.head_br.x>this.maxX||this.$refs.snake.head_tl.y<0||this.$refs.snake.head_br.y>this.maxY)&&!this.$refs.snake.isPointHittingSnake(this.$refs.snake.head_tl,this.$refs.snake.head_br)}}},xt=yt,_t=(n("4578"),Object(u["a"])(xt,$,F,!1,null,null,null)),kt=_t.exports;l()(_t,{VContainer:y["a"]});var vt={components:{SnakeGame:kt},data:function(){return{}},watch:{},mounted:function(){return Object(S["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},computed:Object(i["a"])({},Object(o["b"])({})),methods:{}},bt=vt,gt=Object(u["a"])(bt,w,O,!1,null,"24a0c99b",null),wt=gt.exports;a["a"].use(g["a"]);var Ot=[{path:"/",name:"home",component:wt}],St=new g["a"]({base:"/games/snake",routes:Ot}),$t=St,Ft={namespaced:!0,state:{},mutations:{},actions:{}};a["a"].use(o["a"]);var jt=new o["a"].Store({modules:{snakeGame:Ft}}),Pt=(n("5363"),n("f309"));a["a"].use(Pt["a"]);var Gt=new Pt["a"]({theme:{dark:!1}}),Ct={mounted:function(){var t="Snake Game";document.title=t}};a["a"].config.productionTip=!1,a["a"].mixin(Ct),new a["a"]({router:$t,store:jt,vuetify:Gt,render:function(t){return t(b)}}).$mount("#app")}});
//# sourceMappingURL=app.3fb9a181.js.map