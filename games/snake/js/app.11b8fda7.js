(function(t){function e(e){for(var r,i,o=e[0],c=e[1],u=e[2],l=0,f=[];l<o.length;l++)i=o[l],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);d&&d(e);while(f.length)f.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],r=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(r=!1)}r&&(s.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},a={app:0},s=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/games/snake/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var d=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"19a2":function(t,e,n){},4578:function(t,e,n){"use strict";n("19a2")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-app-bar",{attrs:{app:"",color:"indigo",dark:""}},[n("v-toolbar-title",{staticClass:"headline"},[n("span",[t._v("Star Snake")])]),n("v-spacer"),n("v-btn",{attrs:{link:"",href:"https://github.com/pirosuke/snake-game",target:"_blank"}},[t._v(" GitHub ")])],1),n("v-main",[n("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[n("router-view")],1)],1)],1)},s=[],i=n("5530"),o=n("2f62"),c={name:"App",components:{},data:function(){return{}},computed:Object(i["a"])({},Object(o["b"])({})),mounted:function(){},created:function(){},destroyed:function(){},methods:{}},u=c,d=n("2877"),l=n("6544"),f=n.n(l),h=n("7496"),p=n("40dc"),m=n("8336"),y=n("a523"),x=n("f6c4"),_=n("2fa4"),k=n("2a7f"),v=Object(d["a"])(u,a,s,!1,null,null,null),b=v.exports;f()(v,{VApp:h["a"],VAppBar:p["a"],VBtn:m["a"],VContainer:y["a"],VMain:x["a"],VSpacer:_["a"],VToolbarTitle:k["a"]});var g=n("8c4f"),O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("SnakeGame")},w=[],S=(n("96cf"),n("1da1")),$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticStyle:{height:"100%"}},[n("StartDialog",{attrs:{open:t.isDialogOpened,message:t.message},on:{"update:open":function(e){t.isDialogOpened=e}}}),n("svg",{ref:"snakeGame",staticStyle:{width:"100%",height:"80%"},attrs:{id:"snake-game"}},[n("Snake",{ref:"snake",attrs:{start_direction:t.snake_direction,start_size:"3"}}),n("Foods",{ref:"foods",attrs:{"max-x":t.maxX,"max-y":t.maxY}}),n("CtrlBtn",{attrs:{x:"10",y:t.maxY-90,label:"L"},nativeOn:{click:function(e){return t.turnSnakeLeft(e)}}}),n("CtrlBtn",{attrs:{x:t.maxX-90,y:t.maxY-90,label:"R"},nativeOn:{click:function(e){return t.turnSnakeRight(e)}}}),n("Score",{ref:"score",attrs:{x:"10",y:"10"}})],1)],1)},P=[],j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{row:"","justify-center":""}},[n("v-dialog",{attrs:{persistent:"","max-width":"300px"},model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v(t._s(t.message))])]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1"},on:{click:t.handleStart}},[t._v("Start")]),n("v-spacer")],1)],1)],1)],1)},F=[],L={props:["open","message"],data:function(){return{}},created:function(){},mounted:function(){},computed:{},methods:{handleStart:function(){this.$emit("update:open",!1)}}},R=L,G=n("b0af"),C=n("99d9"),E=n("169a"),T=n("a722"),M=Object(d["a"])(R,j,F,!1,null,null,null),D=M.exports;f()(M,{VBtn:m["a"],VCard:G["a"],VCardActions:C["a"],VCardTitle:C["b"],VDialog:E["a"],VLayout:T["a"],VSpacer:_["a"]});var I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{attrs:{transform:"translate(1, 1)"}},[n("polygon",{attrs:{points:t.starPoints,fill:"#c6ff00",stroke:"#c6ff00"}}),t._l(t.body_points,(function(e){return n("circle",{key:e.id,attrs:{r:t.parts_radius,fill:"#c6ff79","fill-opacity":"0.5",stroke:"#000","stroke-opacity":"0.4",cx:e.x,cy:e.y}})}))],2)},V=[],B=(n("d3b7"),n("ddb0"),n("3835")),A=n("b85c"),Y=(n("a15b"),n("d81d"),{generateStarPoints:function(t,e,n,r,a){for(var s=Math.PI/a,i=[],o=0;o<2*a;o++){var c=1&o?n:r;i.push({x:t+c*Math.sin(o*s),y:e-c*Math.cos(o*s)})}return i.map((function(t){return t.x+","+t.y})).join(" ")}}),H={components:{},props:["start_direction","start_size"],data:function(){return{parts_radius:5,head_point:{x:0,y:0},body_points:[],pxPerInterval:10,direction:"left"}},created:function(){},mounted:function(){this.direction=this.start_direction,this.reset()},computed:{head_tl:function(){return{x:this.head_point.x-this.parts_radius,y:this.head_point.y-this.parts_radius}},head_br:function(){return{x:this.head_point.x+this.parts_radius,y:this.head_point.y+this.parts_radius}},starPoints:function(){return Y.generateStarPoints(this.head_point.x,this.head_point.y,10,5,5)}},methods:{reset:function(){this.head_point={x:200,y:200},this.body_points=[];for(var t=0;t<this.start_size;t++)this.addBody()},updatePosition:function(){var t=Object.assign({},this.head_point);switch(this.direction){case"left":this.head_point.x-=this.pxPerInterval;break;case"right":this.head_point.x+=this.pxPerInterval;break;case"up":this.head_point.y-=this.pxPerInterval;break;case"down":this.head_point.y+=this.pxPerInterval;break}var e,n=Object(A["a"])(this.body_points.entries());try{for(n.s();!(e=n.n()).done;){var r=Object(B["a"])(e.value,2),a=r[0],s=r[1],i=s;i.x===t.x&&i.y===t.y||(this.body_points[a]=t),t=i}}catch(o){n.e(o)}finally{n.f()}},turnLeft:function(){switch(this.direction){case"left":this.direction="down";break;case"down":this.direction="right";break;case"right":this.direction="up";break;case"up":this.direction="left";break}},turnRight:function(){switch(this.direction){case"left":this.direction="up";break;case"up":this.direction="right";break;case"right":this.direction="down";break;case"down":this.direction="left";break}},addBody:function(){var t={x:0,y:0};if(0===this.body_points.length)switch(this.direction){case"left":t={x:this.head_point.x+this.pxPerInterval,y:this.head_point.y};break;case"right":t={x:this.head_point.x-this.pxPerInterval,y:this.head_point.y};break;case"up":t={x:this.head_point.x,y:this.head_point.y+this.pxPerInterval};break;case"down":t={x:this.head_point.x,y:this.head_point.y-this.pxPerInterval};break}else t=this.body_points[this.body_points.length-1];this.body_points.push({id:this.body_points.length+1,x:t.x,y:t.y})},isPointHittingSnake:function(t,e){var n,r=!1,a=Object(A["a"])(this.body_points);try{for(a.s();!(n=a.n()).done;){var s=n.value,i=s.x-this.parts_radius,o=s.x+this.parts_radius,c=s.y-this.parts_radius,u=s.y+this.parts_radius;if(t.x<o&&t.x>i&&t.y<u&&t.y>c||e.x>i&&e.x<o&&e.y>c&&e.y<u||t.x===i&&t.y===c&&e.x===o&&e.y===u){r=!0;break}}}catch(d){a.e(d)}finally{a.f()}return r}}},X=H,z=Object(d["a"])(X,I,V,!1,null,null,null),q=z.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{attrs:{transform:"translate(1, 1)"}},t._l(t.foods,(function(t){return n("Food",{key:t.id,attrs:{x:t.x,y:t.y,color:t.color,radius:t.radius}})})),1)},N=[],W=(n("4de4"),n("b0c0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{attrs:{transform:"translate("+t.x+","+t.y+")"}},[n("defs",[n("filter",{attrs:{id:"glow",height:"300%",width:"300%",x:"-75%",y:"-75%"}},[n("feMorphology",{attrs:{operator:"dilate",radius:"2",in:"SourceAlpha",result:"THICKEN"}}),n("feGaussianBlur",{attrs:{in:"THICKEN",stdDeviation:"10",result:"BLURRED"}}),n("feFlood",{attrs:{"flood-color":t.color,result:"GLOW_COLOR"}}),n("feComposite",{attrs:{in:"GLOW_COLOR",in2:"BLURRED",operator:"in",result:"SOFT_GLOW_COLORED"}}),n("feMerge",[n("feMergeNode",{attrs:{in:"SOFT_GLOW_COLORED"}}),n("feMergeNode",{attrs:{in:"SourceGraphic"}})],1)],1)]),n("polygon",{attrs:{points:t.starPoints,fill:t.color,stroke:t.color,filter:"url(#glow)"}})])}),J=[],U={components:{},props:["x","y","radius","color"],data:function(){return{}},created:function(){},mounted:function(){},computed:{starPoints:function(){return Y.generateStarPoints(this.radius,this.radius,5,10,7)}},methods:{}},Q=U,Z=Object(d["a"])(Q,W,J,!1,null,null,null),tt=Z.exports,et={components:{Food:tt},props:["maxX","maxY"],data:function(){return{food_id_seq:1,foods:[],foodTypes:[{name:"normal",color:"#ccc"},{name:"speedup",color:"#F00"},{name:"grow",color:"#0F0"},{name:"more_food",color:"#66F"}]}},created:function(){},mounted:function(){},computed:{},methods:{reset:function(){this.foods=[]},checkEating:function(t,e){var n,r=null,a=Object(A["a"])(this.foods);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(this.isPointHittingFood(s,t,e)){r=s;break}}}catch(i){a.e(i)}finally{a.f()}return null!==r&&(this.foods=this.foods.filter((function(t){return t.id!==r.id}))),r},isPointHittingFood:function(t,e,n){var r=!1,a=t.x,s=t.x+2*t.radius,i=t.y,o=t.y+2*t.radius;return(e.x<=s&&e.x>=a&&e.y<=o&&e.y>=i||n.x>=a&&n.x<=s&&n.y>=i&&n.y<=o||e.x===a&&e.y===i&&n.x===s&&n.y===o)&&(r=!0),r},addFood:function(){var t=this.getRandomFoodType(),e={id:this.food_id_seq,x:this.generateRandomPoint(this.maxX,20,20),y:this.generateRandomPoint(this.maxY,50,50),radius:5,color:t.color,type:t.name};this.foods.push(e),this.food_id_seq+=1},addFoods:function(t){for(var e=0;e<t;e++)this.addFood()},generateRandomPoint:function(t,e,n){return Math.floor(Math.random()*Math.floor(t-2*n))+e},getRandomFoodType:function(){var t=function(t){return t.sort((function(){return Math.random()-.5}))},e=t(this.foodTypes);return e[0]}}},nt=et,rt=Object(d["a"])(nt,K,N,!1,null,null,null),at=rt.exports,st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{attrs:{transform:"translate("+t.x+","+t.y+")"}},[n("a",{attrs:{"xlink:href":"#"}},[n("circle",{attrs:{r:"40",cx:"40",cy:"40",stroke:"#efe","stroke-width":"2%","stroke-opacity":"0.3",fill:"#fff","fill-opacity":"0.2"}}),n("text",{attrs:{x:"32",y:"47",fill:"#9f9",stroke:"#9f9","font-size":"25"}},[t._v(" "+t._s(t.label)+" ")])])])},it=[],ot={components:{},props:["label","x","y"],data:function(){return{}},created:function(){},mounted:function(){},computed:{},methods:{}},ct=ot,ut=Object(d["a"])(ct,st,it,!1,null,null,null),dt=ut.exports,lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{attrs:{transform:"translate("+t.x+","+t.y+")"}},[n("a",{attrs:{"xlink:href":"#"}},[n("rect",{attrs:{x:"0",y:"0",width:"180",height:"40",stroke:"#fff",fill:"#000","fill-opacity":"0.25",rx:"5",ry:"5"}}),n("text",{attrs:{x:"10",y:"30",width:"180",fill:"#9f9",stroke:"#9f9","font-size":"25"}},[t._v(" "+t._s(t.scoreFormatted)+" ")])])])},ft=[],ht=(n("25f0"),n("4d90"),{components:{},props:["x","y"],data:function(){return{score:0}},created:function(){},mounted:function(){},computed:{scoreFormatted:function(){return this.score.toString().padStart(10,"0")}},methods:{addScore:function(t){this.score+=t},resetScore:function(){this.score=0}}}),pt=ht,mt=Object(d["a"])(pt,lt,ft,!1,null,null,null),yt=mt.exports,xt={components:{StartDialog:D,Snake:q,Foods:at,CtrlBtn:dt,Score:yt},props:[],data:function(){return{snake_direction:"left",isGameOver:!1,isDialogOpened:!0,maxX:0,maxY:0,snakeFps:10,snakeLastTs:null}},created:function(){},mounted:function(){this.resetArea(),window.addEventListener("keyup",this.handleKeyup)},watch:{isDialogOpened:function(t){t||(this.$refs.snakeGame.focus(),this.resetGame())}},computed:{message:function(){return this.isGameOver?"Game Over!":""},snakeFpsInterval:function(){return 1e3/this.snakeFps}},methods:{resetArea:function(){var t=this.$refs.snakeGame.getBoundingClientRect();this.maxX=t.width,this.maxY=t.height},resetGame:function(){this.$refs.snake.reset(),this.$refs.foods.reset(),this.$refs.score.resetScore(),this.snake_direction="left",this.isGameOver=!1,this.snakeFps=10;for(var t=0;t<5;t++)this.$refs.foods.addFood();this.lastTs=Date.now(),this.gameLoop()},gameLoop:function(){var t=Date.now(),e=t-this.snakeLastTs;if(e>this.snakeFpsInterval){this.snakeLastTs=t-e%this.snakeFpsInterval,this.$refs.snake.updatePosition(),this.$refs.score.addScore(this.$refs.snake.body_points.length),this.isSnakeAlive()||(this.isGameOver=!0,this.isDialogOpened=!0);var n=this.$refs.foods.checkEating(this.$refs.snake.head_br,this.$refs.snake.head_tl);if(null!==n){switch(n.type){case"speedup":this.snakeFps+=8;break;case"grow":for(var r=0;r<10;r++)this.$refs.snake.addBody();break;case"more_food":this.$refs.foods.addFoods(5);break}this.$refs.snake.addBody(),this.$refs.foods.addFood()}}this.isGameOver||(this.raf=requestAnimationFrame(this.gameLoop))},handleKeyup:function(t){switch(t.keyCode){case 76:this.turnSnakeLeft();break;case 82:this.turnSnakeRight();break}},turnSnakeLeft:function(){this.$refs.snake.turnLeft()},turnSnakeRight:function(){this.$refs.snake.turnRight()},isSnakeAlive:function(){return!(this.$refs.snake.head_tl.x<0||this.$refs.snake.head_br.x>this.maxX||this.$refs.snake.head_tl.y<0||this.$refs.snake.head_br.y>this.maxY)&&!this.$refs.snake.isPointHittingSnake(this.$refs.snake.head_tl,this.$refs.snake.head_br)}}},_t=xt,kt=(n("4578"),Object(d["a"])(_t,$,P,!1,null,null,null)),vt=kt.exports;f()(kt,{VContainer:y["a"]});var bt={components:{SnakeGame:vt},data:function(){return{}},watch:{},mounted:function(){return Object(S["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},computed:Object(i["a"])({},Object(o["b"])({})),methods:{}},gt=bt,Ot=Object(d["a"])(gt,O,w,!1,null,"24a0c99b",null),wt=Ot.exports;r["a"].use(g["a"]);var St=[{path:"/",name:"home",component:wt}],$t=new g["a"]({base:"/game/snake",routes:St}),Pt=$t,jt={namespaced:!0,state:{},mutations:{},actions:{}};r["a"].use(o["a"]);var Ft=new o["a"].Store({modules:{snakeGame:jt}}),Lt=(n("5363"),n("f309"));r["a"].use(Lt["a"]);var Rt=new Lt["a"]({theme:{dark:!1}}),Gt={mounted:function(){var t="Star Snake";document.title=t}};r["a"].config.productionTip=!1,r["a"].mixin(Gt),new r["a"]({router:Pt,store:Ft,vuetify:Rt,render:function(t){return t(b)}}).$mount("#app")}});
//# sourceMappingURL=app.11b8fda7.js.map