(function(t){function e(e){for(var r,a,l=e[0],u=e[1],c=e[2],m=0,f=[];m<l.length;m++)a=l[m],i[a]&&f.push(i[a][0]),i[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);s&&s(e);while(f.length)f.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,l=1;l<n.length;l++){var u=n[l];0!==i[u]&&(r=!1)}r&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},i={app:0},o=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var s=u;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"034f":function(t,e,n){"use strict";var r=n("04f5"),i=n.n(r);i.a},"04f5":function(t,e,n){},5489:function(t,e,n){"use strict";var r=n("76db"),i=n.n(r);i.a},"76db":function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);var r=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticStyle:{border:"1px solid #000"},attrs:{id:"app",width:t.gameArea.width+"px",height:t.gameArea.height+"px"}},[n("g",{attrs:{transform:"translate(1, 1)"}},[n("BlockList"),t._l(t.balls,function(t){return n("Ball",{key:t.ballId,attrs:{"ball-id":t.ballId,"ball-r":t.r,"ball-x":t.x,"ball-y":t.y,"ball-fill":t.fill}})})],2)])},o=[],a=n("9ab4"),l=n("60a3"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{attrs:{transform:"translate(1, 1)"}},[n("circle",{attrs:{r:t.ballR,fill:t.ballFill,stroke:"#fff",cx:t.ballX,cy:t.ballY}})])},c=[],s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a["b"](e,t),a["a"]([Object(l["b"])({type:String})],e.prototype,"ballId",void 0),a["a"]([Object(l["b"])({type:String})],e.prototype,"ballFill",void 0),a["a"]([Object(l["b"])({type:Number})],e.prototype,"ballR",void 0),a["a"]([Object(l["b"])({type:Number})],e.prototype,"ballX",void 0),a["a"]([Object(l["b"])({type:Number})],e.prototype,"ballY",void 0),e=a["a"]([l["a"]],e),e}(l["c"]),m=s,f=m,g=(n("ffdf"),n("2877")),p=Object(g["a"])(f,u,c,!1,null,"30336878",null),v=p.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{attrs:{transform:"translate("+t.gameArea.blockListMarginTop+","+t.gameArea.blockListMarginLeft+")"}},t._l(t.blockList,function(t){return n("g",{key:t.blockId},[n("rect",{attrs:{width:t.width,height:t.height,stroke:t.isHit?"#fff":"#ccc",fill:t.isHit?"#fff":"#00c","stroke-width":"1",x:t.x,y:t.y}})])}))},h=[],d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a["b"](e,t),Object.defineProperty(e.prototype,"blockList",{get:function(){for(var t=this.$store.getters.getBlocks(),e=[],n=0,r=t;n<r.length;n++){var i=r[n];e.push(Object.assign(i,{}))}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gameArea",{get:function(){return this.$store.getters.getGameArea()},enumerable:!0,configurable:!0}),e=a["a"]([l["a"]],e),e}(l["c"]),y=d,x=y,w=(n("5489"),Object(g["a"])(x,b,h,!1,null,"d1cdbe48",null)),k=w.exports,S=function(){function t(t){this.fps=60,this.interval=null,this.updateFunc=t}return t.prototype.start=function(){var t=this;this.interval=setInterval(function(){t.update()},1e3/this.fps)},t.prototype.end=function(){clearInterval(this.interval)},t.prototype.update=function(){this.updateFunc()},t}(),O=S,j=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a["b"](e,t),e.prototype.created=function(){var t=this;this.$store.dispatch("resetGame");var e=new O(function(){return t.$store.dispatch("update")});e.start()},Object.defineProperty(e.prototype,"balls",{get:function(){return this.$store.getters.getBalls()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gameArea",{get:function(){return this.$store.getters.getGameArea()},enumerable:!0,configurable:!0}),e=a["a"]([Object(l["a"])({components:{Ball:v,BlockList:k}})],e),e}(l["c"]),R=j,D=R,X=(n("034f"),Object(g["a"])(D,i,o,!1,null,null,null)),Y=X.exports,A=n("2f62"),_=n("2ef0");function B(t){return t.map(function(t){return{name:t.name,minX:t.x+t.vx,maxX:t.x+t.vx+t.r,minY:t.y+t.vy,maxY:t.y+t.vy+t.r,movingRight:t.vx>0,movingDown:t.vy>0}})}function L(t,e,n){for(var r={},i=0,o=t;i<o.length;i++){var a=o[i],l={movingRight:a.movingRight,movingDown:a.movingDown};a.maxX>e?l.movingRight=!1:a.minX<0&&(l.movingRight=!0),a.maxY>n?l.movingDown=!1:a.minY<0&&(l.movingDown=!0),r[a.name]=l}return r}function P(t,e,n,r,i,o,a,l,u){var c=t<r,s=e<i;return c&&s?r+n-o>=i+n-a?"above":"left":c&&!s?r+n-o>=a+u-i?"below":"left":!c&&s?o+l-r>=i+n-a?"above":"right":c||s?void 0:o+l-r>=a+u-i?"below":"right"}function M(t,e){return t.movingRight===e.movingRight&&t.movingDown===e.movingDown}function $(t,e,n,r,i){for(var o={},a=[],l=0,u=e;l<u.length;l++){for(var c=u[l],s={movingRight:c.movingRight,movingDown:c.movingDown},m=0,f=n;m<f.length;m++){var g=f[m],p={minX:g.x+r,maxX:g.x+r+g.width,minY:g.y+i,maxY:g.y+i+g.height},v=p.minX<=c.minX&&c.minX<=p.maxX||p.minX<=c.maxX&&c.maxX<=p.maxX,b=p.minY<=c.minY&&c.minY<=p.maxY||p.minY<=c.maxY&&c.maxY<=p.maxY;if(!g.isHit&&v&&b){a.push(g.blockId);var h=_["find"](t,{name:c.name}),d=P(h.x,h.y,h.r,c.minX,c.minY,p.minX,p.minY,g.width,g.height);switch(d){case"above":s.movingDown=!1;break;case"below":s.movingDown=!0;break;case"left":s.movingRight=!1;break;case"right":s.movingRight=!0;break}break}}o[c.name]=s}return[o,a]}r["default"].use(A["a"]);var I=new A["a"].Store({state:{gameArea:{width:500,height:600,blockListMarginTop:50,blockListMarginLeft:50},balls:[{name:"ball-1",x:400,y:400,vx:10,vy:10,r:5,minSpeed:5,maxSpeed:10,fill:"#000"},{name:"ball-2",x:300,y:300,vx:-5,vy:5,r:10,minSpeed:5,maxSpeed:10,fill:"#c00"},{name:"ball-3",x:300,y:300,vx:5,vy:5,r:5,minSpeed:3,maxSpeed:5,fill:"#00c"}],blocks:[]},getters:{getGameArea:function(t,e){return function(){return t.gameArea}},getBallState:function(t,e){return function(e){return _["find"](t.balls,{name:e})}},getBalls:function(t,e){return function(){return t.balls}},getBlocks:function(t,e){return function(){return t.blocks}}},mutations:{updateBallPositions:function(t,e){var n=B(t.balls),r=L(n,t.gameArea.width,t.gameArea.height),i=$(t.balls,n,t.blocks,t.gameArea.blockListMarginLeft,t.gameArea.blockListMarginTop),o=i[0],a=i[1];t.blocks=t.blocks.map(function(t){return _["includes"](a,t.blockId)&&(t.isHit=!0),t});for(var l={},u=0,c=n;u<c.length;u++){var s=c[u],m={movingRight:s.movingRight,movingDown:s.movingDown},f=r[s.name],g=o[s.name];M(s,f)?M(s,g)||(m.movingRight=g.movingRight,m.movingDown=g.movingDown):(m.movingRight=f.movingRight,m.movingDown=f.movingDown),l[s.name]=m}for(var p=0,v=t.balls;p<v.length;p++){var b=v[p];b.vx<0&&l[b.name].movingRight?b.vx=_["random"](b.minSpeed,b.maxSpeed):b.vx>0&&!l[b.name].movingRight&&(b.vx=0-_["random"](b.minSpeed,b.maxSpeed)),b.x=b.x+b.vx,b.vy<0&&l[b.name].movingDown?b.vy=_["random"](b.minSpeed,b.maxSpeed):b.vy>0&&!l[b.name].movingDown&&(b.vy=0-_["random"](b.minSpeed,b.maxSpeed)),b.y=b.y+b.vy}},generateBlocks:function(t,e){t.blocks=[];for(var n=0,r=_["range"](10);n<r.length;n++)for(var i=r[n],o=0,a=_["range"](10);o<a.length;o++){var l=a[o];t.blocks.push({x:40*l,y:20*i,width:40,height:20,blockId:l+":"+i,isHit:!1})}}},actions:{resetGame:function(t){t.commit("generateBlocks")},update:function(t){t.commit("updateBallPositions")}}});r["default"].config.productionTip=!1,new r["default"]({store:I,render:function(t){return t(Y)}}).$mount("#app")},e7a6:function(t,e,n){},ffdf:function(t,e,n){"use strict";var r=n("e7a6"),i=n.n(r);i.a}});
//# sourceMappingURL=app.5d4d18f9.js.map